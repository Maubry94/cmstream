<div 
class="h-[500px] relative text-[white]"
@mouseover="this.hover = true"
@mouseleave="this.hover = false"
cv-ref="div"
>
    <div 
    cv-for="video of Object.entries(this.videos)"
    class="w-full h-full absolute top-0 left-0 transition duration-[1s]"
    cv-class="{
        'opacity-1': this.video[0] == this.index,
        'opacity-0': this.video[0] != this.index,
    }"
    >
        <img 
        class="w-full absolute top-[50%] left-0 -translate-y-[50%]"
        :src="this.video[1].img"
        />

        <p class="absolute top-[10px] left-[10px] text-[40px]">
            {{this.video[1].title}}
        </p>
    </div>

    <div 
    class="absolute bottom-0 h-[200px] p-[20px] flex gap-[40px] transition  duration-[1s]"
    cv-style="{'transform': `translateX(-${this.xpos}px)`}"
    cv-ref="videos"
    >
        <div 
        cv-for="video of Object.entries(this.videos)"
        class="aspect-video h-full overflow-hidden shrink-0 relative"
        @click="this.index = this.video[0]"
        >
            <img
            class="w-full"
            :src="this.video[1].img" 
            alt=""
            />

            <p class="absolute bottom-[10px] left-[10px]">
                {{this.video[1].title}}
            </p>
        </div>
    </div>

    <icon
    name="chevron-left"
    size="50"
    @click="left"
    class="absolute left-0 bottom-[100px] translate-y-[50%] transition"
    cv-class="{
        '-translate-x-[100%]': this.hover === false
    }"
    />

    <icon 
    name="chevron-right"
    size="50"
    @click="right"
    class="absolute right-0 bottom-[100px] translate-y-[50%] transition"
    cv-class="{
        'translate-x-[100%]': this.hover === false
    }"
    />
</div>

<script>
    export default {
        data: {
            index: 0,
            hover: false,
            xpos: 0,
            videos: [
                {
                    img: "https://picsum.photos/1000",
                    title: "Test",
                },
                {
                    img: "https://picsum.photos/1000/1000",
                    title: "Test"
                    
                },
                {
                    img: "https://picsum.photos/1000",
                    title: "Test"
                },
                {
                    img: "https://picsum.photos/1000/1000",
                    title: "Test"
                },
                {
                    img: "https://picsum.photos/1000",
                    title: "Test"
                },
                {
                    img: "https://picsum.photos/1000/1000",
                    title: "Test"
                },
            ]
        },
        methods: {
            right(){
                let width = this.$refs.videos.getBoundingClientRect().width;
                let widthDiv = this.$refs.div.getBoundingClientRect().width;
                if(this.xpos + widthDiv + 400 > width) this.xpos = width - widthDiv;
                else this.xpos += 400;
            },
            left(){
                if(this.xpos - 400 < 0)this.xpos = 0;
                else this.xpos -= 400;
            }
        }
    }
</script>

<style>

</style>