<div>
    <h1 
    cv-if="this.page?.title"
    class="w-full text-center text-[40px] p-[10px]"
    >
        {{this.page.title}}
    </h1>

    <row 
    cv-for="row of this.page?.rows || []" 
    :content="this.row"
    cv-class="{
        'bg-skyblue': this.row.blue
    }"
    />
</div>

<script>
    const [row] = await Promise.all([
        importer('/public/cuteVue/components/row.html'),
    ]);
    
    export default {
        components: {
            row,
        },

        data: {
            page: null,
        },

        methods: {
            init(){
                const pageName = router.params.name || "home";
                const page = this.pages.find(p => p.name === pageName);
                document.title = page.navTitle ? document.title + " : " + page.navTitle : document.title;
                if(page !== undefined) this.page = page;
                else router.push("/");
            }
        },

        mounted(){
            this.init();
        },

        stores: [
            {
                name: "pages",
                states: ["pages"],
            }
        ]
    }
</script>

<style>

</style>